
# Exploras Agent - EPUB Knowledge Explorer ğŸ“š

![Version](https://img.shields.io/badge/version-v1.0.0-blue.svg)
![License](https://img.shields.io/badge/license-AGPLv3-green.svg)
![Platform](https://img.shields.io/badge/platform-Docker%20%7C%20Kubernetes-orange.svg)
![Status](https://img.shields.io/badge/status-Production%20Ready-brightgreen.svg)
![AI](https://img.shields.io/badge/AI-Powered-purple.svg)

**This repository is entirely generated by AI under human instructions.**

## ğŸš€ Current Release: v1.0.0

âœ¨ **Latest Release**: Complete Kubernetes deployment with multi-environment support  
ğŸ“… **Release Date**: July 27, 2025  
ğŸ”— **Release Notes**: [View full changelog](../../releases/tag/v1.0.0)

### What's New in v1.0.0
- âœ… **Multi-Environment Support**: Docker Compose (development) + Kubernetes (production)
- âœ… **Production-Ready Deployment**: Complete MicroK8s setup with ingress
- âœ… **Automated Scripts**: Cross-platform deployment automation
- âœ… **Comprehensive Documentation**: Setup guides for all environments
- âœ… **Cost-Optimized Architecture**: Selective EPUB content processing

âœ³ï¸ An experimental AI-powered agent for extracting knowledge from EPUB books with **cost-optimized Q&A** through selective TOC-based content processing. The provided example uses *Cloud-Native Ecosystems*, but the solution is applicable to any EPUB with a Table of Contents (TOC).

## ğŸ¯ Purpose
This is an experimental prototype to validate:
- **Cost Optimization**: Send only selected TOC sections to OpenAI instead of entire books
- **UX Workflow**: Interactive TOC selection â†’ Targeted Q&A
- **Architecture**: FastAPI backend + Angular frontend with Material Design

## ï¿½ Deployment Options

### ğŸ³ Docker Compose (Simple Development)

#### Prerequisites
- Docker Desktop installed
- Git (to clone the repository)

#### Option 1: PowerShell Script (Windows)
```powershell
./start.ps1
```

#### Option 2: Bash Script (Linux/Mac/WSL)
```bash
chmod +x start.sh
./start.sh
```

#### Option 3: Make Commands
```bash
make start        # Build and start all services
make status       # Check container status
make logs         # View logs
make down         # Stop services
make clean        # Complete cleanup
```

#### Option 4: Manual Docker Compose
```bash
# Build and start
docker-compose up --build -d

# Check status
docker-compose ps

# View logs
docker-compose logs -f

# Stop
docker-compose down
```

### â˜¸ï¸ Kubernetes with MicroK8s (Production-Ready)

#### Prerequisites
- Ubuntu 24.04 (or WSL2 with Ubuntu)
- MicroK8s installed and configured

#### Setup MicroK8s
```bash
# Install MicroK8s
sudo snap install microk8s --classic

# Add user to microk8s group
sudo usermod -a -G microk8s $USER
sudo chown -f -R $USER ~/.kube
newgrp microk8s

# Enable required addons
microk8s enable registry storage ingress

# Verify installation
microk8s status
```

#### Build and Deploy
```bash
# Build backend image
sudo docker build -t localhost:32000/exploras-backend:latest backend/
sudo docker push localhost:32000/exploras-backend:latest

# Build frontend image
sudo docker build -t localhost:32000/exploras-frontend:latest frontend/
sudo docker push localhost:32000/exploras-frontend:latest

# Deploy to Kubernetes
microk8s kubectl apply -f k8s/backend.yaml
microk8s kubectl apply -f k8s/frontend.yaml
microk8s kubectl apply -f k8s/ingress.yaml

# Check deployment status
microk8s kubectl get pods
microk8s kubectl get services
microk8s kubectl get ingress
```

#### Access Application (Kubernetes)
```bash
# Option 1: Port-forward (temporary access)
microk8s kubectl port-forward service/exploras-frontend-service 8080:80

# Then visit http://localhost:8080

# Option 2: Ingress (permanent access)
# Add to /etc/hosts (Linux/Mac) or C:\Windows\System32\drivers\etc\hosts (Windows):
# 127.0.0.1 exploras.local
# Then visit http://exploras.local
```

## ğŸŒ Access the Application

### Docker Compose
After starting the containers:
- **Frontend**: http://localhost
- **Backend API**: http://localhost:8000
- **API Docs**: http://localhost:8000/docs

### Kubernetes (MicroK8s)
After deploying to Kubernetes:
- **Frontend**: http://localhost:8080 (via port-forward) or http://exploras.local (via ingress)
- **Backend API**: Accessible internally to frontend via `exploras-backend-service:8000`
- **API Docs**: http://exploras.local/api/docs (via frontend proxy)

## ğŸ—ï¸ Architecture

### Docker Compose (Development)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚    Backend      â”‚
â”‚   Angular +     â”‚â—„â”€â”€â–ºâ”‚   FastAPI +     â”‚
â”‚   Material +    â”‚    â”‚   ebooklib +    â”‚
â”‚   Nginx         â”‚    â”‚   Python        â”‚
â”‚   Port: 80      â”‚    â”‚   Port: 8000    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Kubernetes (Production)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Ingress            â”‚
â”‚   (exploras.local)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend Service      â”‚    â”‚   Backend Service       â”‚
â”‚   (exploras-frontend-   â”‚â—„â”€â”€â–ºâ”‚   (exploras-backend-    â”‚
â”‚    service:80)          â”‚    â”‚    service:8000)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend Pod          â”‚    â”‚   Backend Pod           â”‚
â”‚   Angular + Nginx       â”‚    â”‚   FastAPI + Python      â”‚
â”‚   (Containerized)       â”‚    â”‚   (Containerized)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Project Structure

```
exploras-agent/
â”œâ”€â”€ backend/                 # FastAPI backend
â”‚   â”œâ”€â”€ main.py             # Main API server
â”‚   â”œâ”€â”€ requirements.txt    # Python dependencies
â”‚   â””â”€â”€ Dockerfile          # Backend container
â”œâ”€â”€ frontend/               # Angular frontend
â”‚   â”œâ”€â”€ src/                # Angular source code
â”‚   â”œâ”€â”€ package.json        # Node dependencies
â”‚   â”œâ”€â”€ Dockerfile          # Frontend container
â”‚   â””â”€â”€ nginx.conf          # Nginx configuration
â”œâ”€â”€ k8s/                    # Kubernetes manifests
â”‚   â”œâ”€â”€ backend.yaml        # Backend deployment & service
â”‚   â”œâ”€â”€ frontend.yaml       # Frontend deployment & service
â”‚   â”œâ”€â”€ ingress.yaml        # Ingress configuration
â”‚   â”œâ”€â”€ configmap.yaml      # Configuration maps
â”‚   â”œâ”€â”€ deploy.sh           # Deployment script
â”‚   â”œâ”€â”€ cleanup.sh          # Cleanup script
â”‚   â””â”€â”€ Makefile           # Kubernetes commands
â”œâ”€â”€ ebook/                  # EPUB files
â”œâ”€â”€ samples/                # Utility scripts
â”œâ”€â”€ plugin/                 # Integration plugins
â”œâ”€â”€ docker-compose.yml      # Service orchestration
â”œâ”€â”€ start.ps1              # Windows startup script
â”œâ”€â”€ start.sh               # Linux/Mac startup script
â””â”€â”€ Makefile               # Make commands
```

## ğŸ”§ Development

### Local Development (without Docker)
```bash
# Backend
cd backend
pip install -r requirements.txt
python main.py

# Frontend (requires Node.js 18+)
cd frontend
npm install
ng serve
```

### Development with Docker
```bash
# Docker Compose development
make dev  # Auto-rebuild on changes

# Kubernetes development
cd k8s
make build-dev    # Build development images
make deploy-dev   # Deploy to MicroK8s
make logs         # View pod logs
```

### Troubleshooting

#### Docker Issues
```bash
# Check container logs
docker-compose logs backend
docker-compose logs frontend

# Rebuild containers
docker-compose up --build --force-recreate
```

#### Kubernetes Issues
```bash
# Check pod status
microk8s kubectl get pods -o wide

# Check pod logs
microk8s kubectl logs <pod-name>

# Check services
microk8s kubectl get services

# Debug pod connectivity
microk8s kubectl exec -it <frontend-pod> -- wget -q -O - http://exploras-backend-service:8000/health
```

## ğŸ§ª Testing the API

### Docker Compose
```bash
# Get Table of Contents
curl http://localhost:8000/toc

# Ask a Question
curl -X POST -H "Content-Type: application/json" \
  -d '{"toc_id":"toc_0_0","question":"What is this chapter about?"}' \
  http://localhost:8000/question
```

### Kubernetes
```bash
# Port-forward to backend (for direct API testing)
microk8s kubectl port-forward service/exploras-backend-service 8001:8000

# Get Table of Contents
curl http://localhost:8001/toc

# Ask a Question
curl -X POST -H "Content-Type: application/json" \
  -d '{"toc_id":"toc_0_0","question":"What is this chapter about?"}' \
  http://localhost:8001/question

# Test via frontend proxy (when frontend is port-forwarded to 8080)
curl http://localhost:8080/api/toc
```

## ğŸ¨ Features

- **Cost Optimization**: Selective content loading instead of entire books
- **Material Design**: Blue/orange Exploras theme
- **TOC Tree**: Interactive chapter/section selection
- **Q&A Interface**: Context-aware responses with metadata
- **Multi-Platform Deployment**: Docker Compose + Kubernetes support
- **Production Ready**: MicroK8s deployment with ingress and service mesh
- **API Documentation**: Auto-generated with FastAPI
- **Responsive UI**: Works on desktop and mobile
- **Container Orchestration**: Full Kubernetes manifests with deployments, services, and ingress

## ğŸ“ Current Status

âœ… **Working Features:**
- EPUB loading and TOC extraction
- FastAPI backend with /toc and /question endpoints
- Angular frontend with Material Design
- Docker containerization with Nginx proxy
- Kubernetes deployment on MicroK8s
- Service mesh with internal DNS resolution
- Ingress controller for external access
- Cost-optimized content selection

ğŸ”„ **In Progress:**
- OpenAI integration (currently using mock responses)
- Enhanced UI components
- Authentication system
- Monitoring and logging integration

## ğŸ¤ How it Works

1. **Upload/Select**: User selects an EPUB file via the web UI
2. **TOC Extraction**: Backend parses the TOC structure
3. **Interactive Selection**: User selects specific chapters/sections
4. **Targeted Q&A**: Only selected content is sent to AI (cost optimization)
5. **Real-time Answers**: Responses displayed with context metadata

## ï¿½ Release History

### v1.0.0 (July 27, 2025) - Production Ready ğŸš€
- **Multi-Environment Support**: Complete Docker Compose + Kubernetes deployment
- **Production Architecture**: MicroK8s with ingress, service mesh, container registry
- **Automated Deployment**: Cross-platform scripts for all environments
- **Comprehensive Documentation**: Complete setup guides and troubleshooting
- **Container Orchestration**: Full Kubernetes manifests and Docker optimization
- **Cost-Optimized AI**: Selective content processing architecture ready for OpenAI

### Upcoming Releases ğŸ”®
- **v1.1.0**: OpenAI integration and real AI responses
- **v1.2.0**: Authentication system and user management
- **v2.0.0**: Multi-book support and advanced analytics

## ï¿½ğŸ“„ License

Licensed under the [GNU AGPLv3](LICENSE).
Powered by **OldBirba**, AI Assistant of Gandalf âœ¨
